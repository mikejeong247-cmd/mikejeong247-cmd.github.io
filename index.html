<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>í”„ë¡œ ì´ëª¨ì§€ ê²€ìƒ‰ â€” í•˜ì´ë¸Œë¦¬ë“œ ì¸ë¼ì¸ PRO (36ê°œ + ë”ë³´ê¸°)</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <style>
    :root{
      --grid-width:520px;   /* ì´ˆê¸° LCP ìµœì†Œí™”. í•„ìš” ì‹œ 560px */
      --tile:72px;
      --gap:8px;
      --maxw:1100px;
      --cat-h:48px;
      --cat-f:15px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Apple Color Emoji,Noto Color Emoji,sans-serif}

    /* ìƒë‹¨: ê²€ìƒ‰ + ë³µì‚¬ */
    #toolbar{position:sticky;top:0;z-index:9;background:#fff;border-bottom:1px solid #eee}
    #toolbar .in{max-width:var(--maxw);margin:0 auto;padding:10px 12px;display:grid;gap:8px;grid-template-columns:1fr auto;align-items:center}
    #search{height:40px;border:1px solid #ddd;border-radius:8px;padding:0 12px;font-size:15px}
    #copyBox{display:flex;gap:8px;align-items:center}
    #copyOut{width:160px;height:40px;border:1px solid #ddd;border-radius:8px;padding:0 12px;font-size:16px}
    #btnCopy{height:40px;padding:0 14px;border:1px solid #333;background:#111;color:#fff;border-radius:8px;cursor:pointer}

    /* ì¹´í…Œê³ ë¦¬ í‘œ */
    #catWrap{position:sticky;top:60px;z-index:8;background:#fff;border-bottom:1px solid #eee}
    #catWrap .in{max-width:var(--maxw);margin:0 auto;padding:8px 12px}
    table.cat{width:100%;table-layout:fixed;border-collapse:collapse;font-size:var(--cat-f)}
    table.cat td{padding:0;border:1px solid #f1f1f1}
    .cat-btn{width:100%;height:var(--cat-h);display:grid;grid-template-columns:28px 1fr;gap:8px;align-items:center;padding:8px 10px;border:0;background:#fff;cursor:pointer}
    .cat-btn:hover{background:#fafafa}
    .cat-btn.active{outline:2px solid rgba(0,0,0,.08);background:#f9f9ff}
    .cat-emo{width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;font-size:20px}
    .cat-lab{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left}

    /* ê·¸ë¦¬ë“œ */
    #gridWrap{max-width:var(--grid-width);margin:12px auto 60px;padding:0 8px}
    #grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--tile),1fr));gap:var(--gap)}
    .tile{width:var(--tile);height:var(--tile);display:inline-flex;align-items:center;justify-content:center;border-radius:10px;border:1px solid #eee;background:#fff;cursor:pointer;user-select:none;transition:transform .04s}
    .tile:hover{transform:translateY(-1px);background:#fafafa}
    .tile img{width:var(--tile);height:var(--tile);image-rendering:-webkit-optimize-contrast}

    /* ë”ë³´ê¸° ë²„íŠ¼ */
    #moreWrap{max-width:var(--grid-width);margin:-4px auto 40px;padding:0 8px;display:none}
    #btnMore{width:100%;height:44px;border:1px solid #ddd;background:#fff;border-radius:10px;cursor:pointer;font-size:15px}
    #btnMore[disabled]{opacity:.6;cursor:default}

    /* ìƒíƒœ/í† ìŠ¤íŠ¸/ë²•ì  */
    #status{max-width:960px;margin:16px auto 0;padding:8px 12px;color:#444;text-align:center;display:none;font-size:14px}
    #toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);z-index:20;background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:20px;font-size:14px;opacity:0;pointer-events:none;transition:opacity .2s}
    #toast.show{opacity:1}
    #legal{max-width:var(--maxw);margin:24px auto 40px;padding:0 12px;font-size:12px;color:#777}
    #legal a{color:inherit;text-decoration:underline}

    @media (max-width:720px){
      :root{--cat-f:14px}
      #toolbar .in{grid-template-columns:1fr}
      #catWrap{top:112px}
    }
  </style>
  <!-- Twemoji PNG (SVG OFF) -->
  <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <!-- ìƒë‹¨ -->
  <header id="toolbar">
    <div class="in">
      <input id="search" type="search" placeholder="ì´ëª¨ì§€ ì´ë¦„(name_*)ìœ¼ë¡œ ê²€ìƒ‰ (í˜„ì¬ ì¹´í…Œê³ ë¦¬ ë‚´)"/>
      <div id="copyBox">
        <input id="copyOut" type="text" readonly placeholder="ë³µì‚¬í•  ì´ëª¨ì§€"/>
        <button id="btnCopy" type="button">ë³µì‚¬</button>
      </div>
    </div>
  </header>

  <!-- ì¹´í…Œê³ ë¦¬ -->
  <section id="catWrap">
    <div class="in">
      <table class="cat"><tbody id="catBody"></tbody></table>
    </div>
  </section>

  <!-- ìƒíƒœ/ê·¸ë¦¬ë“œ/ë”ë³´ê¸°/í† ìŠ¤íŠ¸ -->
  <div id="status"></div>
  <main id="gridWrap"><section id="grid"></section></main>
  <div id="moreWrap"><button id="btnMore" type="button">ë”ë³´ê¸°</button></div>
  <div id="toast">ë³µì‚¬ ì™„ë£Œ!</div>

  <!-- ë²•ì  í‘œê¸° -->
  <footer id="legal">
    Emoji graphics by <a href="https://twemoji.twitter.com/" target="_blank" rel="noopener">Twemoji</a> Â© Twitter,
    licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">CC BY 4.0</a>.
    Unicode data Â© The Unicode Consortium.
  </footer>

  <!-- ğŸ”¹ ì¸ë¼ì¸ ë°ì´í„°: People & Body(í”¼í”Œ/ë°”ë””) â€” ìµœì†Œ 36ê°œ ì´ìƒ ì£¼ì… ê¶Œì¥ -->
  <!--  ìš´ì˜ ì‹œ ë¹Œë“œ ë‹¨ê³„ì—ì„œ ì´ ë°°ì—´ì„ 'People & Body' ì¹´í…Œê³ ë¦¬ ì „ì²´ë¡œ ì£¼ì…í•˜ì„¸ìš”.
      (í•„ë“œ: group, name/name_ko/name_en, code(ì„ íƒ), emoji) -->
  <script type="application/json" id="INLINE_PEOPLE">
  [
    {"group":"People & Body","name":"person","emoji":"ğŸ§‘"},
    {"group":"People & Body","name":"man","emoji":"ğŸ‘¨"},
    {"group":"People & Body","name":"woman","emoji":"ğŸ‘©"},
    {"group":"People & Body","name":"boy","emoji":"ğŸ‘¦"},
    {"group":"People & Body","name":"girl","emoji":"ğŸ‘§"},
    {"group":"People & Body","name":"baby","emoji":"ğŸ‘¶"},
    {"group":"People & Body","name":"old man","emoji":"ğŸ‘´"},
    {"group":"People & Body","name":"old woman","emoji":"ğŸ‘µ"},
    {"group":"People & Body","name":"person gesturing OK","emoji":"ğŸ™†"},
    {"group":"People & Body","name":"person gesturing NO","emoji":"ğŸ™…"},
    {"group":"People & Body","name":"person raising hand","emoji":"ğŸ™‹"},
    {"group":"People & Body","name":"person bowing","emoji":"ğŸ™‡"},
    {"group":"People & Body","name":"person walking","emoji":"ğŸš¶"},
    {"group":"People & Body","name":"person running","emoji":"ğŸƒ"},
    {"group":"People & Body","name":"person biking","emoji":"ğŸš´"},
    {"group":"People & Body","name":"person swimming","emoji":"ğŸŠ"},
    {"group":"People & Body","name":"waving hand","emoji":"ğŸ‘‹"},
    {"group":"People & Body","name":"thumbs up","emoji":"ğŸ‘"},
    {"group":"People & Body","name":"thumbs down","emoji":"ğŸ‘"},
    {"group":"People & Body","name":"clapping hands","emoji":"ğŸ‘"},
    {"group":"People & Body","name":"raising hands","emoji":"ğŸ™Œ"},
    {"group":"People & Body","name":"folded hands","emoji":"ğŸ™"},
    {"group":"People & Body","name":"handshake","emoji":"ğŸ¤"},
    {"group":"People & Body","name":"victory hand","emoji":"âœŒï¸"},
    {"group":"People & Body","name":"crossed fingers","emoji":"ğŸ¤"},
    {"group":"People & Body","name":"OK hand","emoji":"ğŸ‘Œ"},
    {"group":"People & Body","name":"call me hand","emoji":"ğŸ¤™"},
    {"group":"People & Body","name":"backhand index pointing left","emoji":"ğŸ‘ˆ"},
    {"group":"People & Body","name":"backhand index pointing right","emoji":"ğŸ‘‰"},
    {"group":"People & Body","name":"backhand index pointing up","emoji":"ğŸ‘†"},
    {"group":"People & Body","name":"backhand index pointing down","emoji":"ğŸ‘‡"},
    {"group":"People & Body","name":"raised hand","emoji":"âœ‹"},
    {"group":"People & Body","name":"raised back of hand","emoji":"ğŸ¤š"},
    {"group":"People & Body","name":"vulcan salute","emoji":"ğŸ––"},
    {"group":"People & Body","name":"sign of the horns","emoji":"ğŸ¤˜"},
    {"group":"People & Body","name":"love-you gesture","emoji":"ğŸ¤Ÿ"},
    {"group":"People & Body","name":"flexed biceps","emoji":"ğŸ’ª"},
    {"group":"People & Body","name":"leg","emoji":"ğŸ¦µ"},
    {"group":"People & Body","name":"foot","emoji":"ğŸ¦¶"},
    {"group":"People & Body","name":"ear","emoji":"ğŸ‘‚"},
    {"group":"People & Body","name":"nose","emoji":"ğŸ‘ƒ"},
    {"group":"People & Body","name":"eyes","emoji":"ğŸ‘€"},
    {"group":"People & Body","name":"mouth","emoji":"ğŸ‘„"},
    {"group":"People & Body","name":"tongue","emoji":"ğŸ‘…"}
    /* â‡§ ì‹¤ì œ ìš´ìš© ì‹œ People & Body ì „ì²´ë¡œ ëŒ€ì²´ */
  ]
  </script>

  <script type="module">
    /* =========================
       0) ìƒìˆ˜/ìœ í‹¸
    ==========================*/
    const BASE = (()=>{ const p=location.pathname.split('/').filter(Boolean); return p.length?`/${p[0]}/`:'/' })();
    const DATA_BASE    = BASE + 'data/';
    const SPRITES_BASE = BASE + 'sprites/';

    const INITIAL_COUNT = 36;      // ì²« í™”ë©´ ê°œìˆ˜(ì•ˆì „ê°’)
    const NEXT_CHUNK    = 240;     // ë”ë³´ê¸° ì´í›„ ìë™ ë¶€ì°© ì²­í¬
    const PREF = ["People & Body","í”¼í”Œ/ë°”ë””"];  // ê¸°ë³¸ ì¹´í…Œê³ ë¦¬

    const UI = {
      search:   document.getElementById('search'),
      copyOut:  document.getElementById('copyOut'),
      btnCopy:  document.getElementById('btnCopy'),
      status:   document.getElementById('status'),
      grid:     document.getElementById('grid'),
      moreWrap: document.getElementById('moreWrap'),
      btnMore:  document.getElementById('btnMore'),
      catBody:  document.getElementById('catBody'),
      toast:    document.getElementById('toast'),
    };

    const twemojiParse = (el)=> window.twemoji?.parse(el,{ base:"https://cdn.jsdelivr.net/npm/twemoji@14.0.2/assets/", folder:"72x72", ext:".png" });
    const showStatus = (m)=>{ UI.status.style.display='block'; UI.status.innerHTML = m; };
    const hideStatus = ()=>{ UI.status.style.display='none'; UI.status.textContent=''; };
    const toast = (t="ë³µì‚¬ ì™„ë£Œ!")=>{ UI.toast.textContent=t; UI.toast.classList.add('show'); setTimeout(()=>UI.toast.classList.remove('show'),900); };

    const codeToEmoji = (code)=>{ try{ return String.fromCodePoint(...String(code).split('-').map(h=>parseInt(h,16))); }catch(_){ return "â“"; } };
    const pick = (obj, keys)=>{ for(const k of keys){ if(obj[k]!=null && obj[k]!=="") return obj[k];
      const k2 = Object.keys(obj).find(x=>x.toLowerCase()===k.toLowerCase()); if(k2 && obj[k2]!=null && obj[k2]!=="") return obj[k2]; } return ''; };

    const KO = {"Smileys & Emotion":"ìŠ¤ë§ˆì¼/ê°ì •","People & Body":"í”¼í”Œ/ë°”ë””","Animals & Nature":"ë™ë¬¼/ìì—°","Food & Drink":"ìŒì‹/ìŒë£Œ","Travel & Places":"ì—¬í–‰/ì¥ì†Œ","Activities":"í™œë™","Objects":"ì‚¬ë¬¼","Symbols":"ê¸°í˜¸","Flags":"êµ­ê¸°"};
    const ORDER = ["Smileys & Emotion","People & Body","Animals & Nature","Food & Drink","Travel & Places","Activities","Objects","Symbols","Flags"];
    const label = (raw)=> KO[raw] || raw || "ê¸°íƒ€";

    // ìƒíƒœ
    let BUILD=null, SPRITE_MAP=null, SUPPORT_HINTS=null;
    let ALL_ITEMS=[], CAT_MAP=new Map();
    let ACTIVE_CAT=null, BASE_LIST=[], VIEW_LIST=[], RENDERED_COUNT=0;

    async function fetchJSON(u){ try{ const r=await fetch(u,{cache:"no-cache"}); if(r.ok) return await r.json(); }catch(_){ } return null; }

    /* =========================
       1) ì •ê·œí™”/ì¹´í…Œê³ ë¦¬
    ==========================*/
    function normalizeItems(root){
      const out=[]; const seen=new Set();
      (function walk(node, inherited=''){
        if(!node) return;
        if(Array.isArray(node)){ for(const v of node) walk(v, inherited); return; }
        if(typeof node!=='object') return;
        const group = pick(node, ['group','category','major','cat','section','type']) || inherited;
        if (Array.isArray(node.items)) { for(const v of node.items) walk(v, group); }
        const code = pick(node, ['code','hex','u','unified','unicode','codepoint','cp']);
        const emojiChar = node.emoji || (code ? codeToEmoji(code) : '');
        if (emojiChar || code){
          const key = code || emojiChar;
          if(seen.has(key)) return; seen.add(key);
          const nameFields = Object.keys(node).filter(k=>/^name[_-]/i.test(k)||k==='name');
          const names = nameFields.map(k=>String(node[k])).filter(Boolean);
          const primary = pick(node,['name_ko','name_kr','name_korean','name']) || pick(node,['name_en','label','cldr','short_name','id']) || '';
          out.push({
            group: group || pick(node,['group','category','major','cat']) || 'ê¸°íƒ€',
            name: primary,
            nameText: [primary, ...names].join(' ').trim().toLowerCase(),
            code: (code||'').toUpperCase(),
            emoji: emojiChar,
            png: pick(node, ['png','pngUrl','url','image','img'])
          });
        }else{
          for(const v of Object.values(node)) if(v && typeof v==='object') walk(v, group);
        }
      })(root,'');
      return out;
    }

    function rebuildCatMap(items){
      const m=new Map();
      for(const it of items){
        const c=it.group||'ê¸°íƒ€';
        if(!m.has(c)) m.set(c, []);
        m.get(c).push(it);
      }
      for(const [k,arr] of m.entries()){
        arr.sort((a,b)=> (a.name||'').localeCompare(b.name||'', 'ko'));
      }
      return m;
    }

    function buildCategoryTable(map){
      const tbody = UI.catBody; tbody.innerHTML="";
      const cats = Array.from(map.keys()).sort((a,b)=>(ORDER.indexOf(a)===-1?999:ORDER.indexOf(a))-(ORDER.indexOf(b)===-1?999:ORDER.indexOf(b)));
      const cols = (innerWidth<=720)?3:5;
      for(let i=0;i<cats.length;i+=cols){
        const tr=document.createElement('tr');
        for(const cat of cats.slice(i,i+cols)){
          const td=document.createElement('td');
          const btn=document.createElement('button');
          btn.className='cat-btn'; btn.dataset.cat=cat;
          const em=document.createElement('span'); em.className='cat-emo'; em.textContent = (map.get(cat)||[])[0]?.emoji || 'ğŸ˜€';
          const la=document.createElement('span'); la.className='cat-lab'; la.textContent = label(cat);
          btn.append(em,la); td.appendChild(btn); tr.appendChild(td);
        }
        while(tr.children.length<cols) tr.appendChild(document.createElement('td'));
        tbody.appendChild(tr);
      }
      twemojiParse(tbody);
      tbody.onclick = async (e)=>{
        const b=e.target.closest('.cat-btn'); if(!b) return;
        const nextCat=b.dataset.cat;
        // ì™¸ë¶€ ë°ì´í„°ê°€ ì•„ì§ ë³‘í•© ì „ì´ê³ , ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ë©´ ì„ ë¡œë“œ
        if(nextCat!==ACTIVE_CAT && nextCat!=="People & Body" && !BUILD){
          showStatus("ë°ì´í„° ë¡œë“œ ì¤‘â€¦");
          await loadExternalIfNeeded();
          hideStatus();
        }
        setActiveCategory(nextCat);
      };
    }

    /* =========================
       2) ë Œë”(36ê°œ + ë”ë³´ê¸° â†’ ì „ëŸ‰)
    ==========================*/
    function hasSprite(it){ return SPRITE_MAP && (SPRITE_MAP[it.code] || (SPRITE_MAP.sprites && SPRITE_MAP.sprites[it.code])); }
    function spriteRec(it){ return (SPRITE_MAP && (SPRITE_MAP[it.code] || (SPRITE_MAP.sprites && SPRITE_MAP.sprites[it.code]))) || null; }

    function makeTile(it){
      const t=document.createElement('div'); t.className='tile'; t.title=it.name||it.code||'';
      // 1) ìŠ¤í”„ë¼ì´íŠ¸
      if(hasSprite(it)){
        const rec=spriteRec(it);
        const sheet=(rec.sheet||rec.s||rec.sprite||'emoji-top500-1.webp');
        const bx=-(rec.x||rec.left||0), by=-(rec.y||rec.top||0);
        const bw=rec.w||rec.width||72, bh=rec.h||rec.height||72;
        t.style.backgroundImage=`url(${SPRITES_BASE}${sheet})`;
        t.style.backgroundPosition=`${bx}px ${by}px`;
        t.style.backgroundRepeat='no-repeat';
        t.style.width=bw+'px'; t.style.height=bh+'px';
        t.dataset.emoji=it.emoji; return t;
      }
      // 2) PNG
      if(it.png && !(SUPPORT_HINTS?.block?.includes(it.code))){
        const img=document.createElement('img'); img.loading='lazy'; img.decoding='async';
        img.src=it.png; img.alt=it.name||it.code||''; t.appendChild(img);
        t.dataset.emoji=it.emoji; return t;
      }
      // 3) Twemoji(ìµœí›„)
      const s=document.createElement('span'); s.textContent=it.emoji || codeToEmoji(it.code); s.style.fontSize='40px';
      t.appendChild(s); twemojiParse(t);
      t.dataset.emoji=it.emoji||''; return t;
    }

    function renderInitial(list){
      UI.grid.innerHTML="";
      RENDERED_COUNT = Math.min(INITIAL_COUNT, list.length);
      const frag=document.createDocumentFragment();
      for(let i=0;i<RENDERED_COUNT;i++) frag.appendChild(makeTile(list[i]));
      UI.grid.appendChild(frag);

      // ë”ë³´ê¸° ë…¸ì¶œ ì œì–´
      if(list.length > RENDERED_COUNT){
        UI.moreWrap.style.display='block';
        UI.btnMore.disabled=false; UI.btnMore.textContent='ë”ë³´ê¸°';
      }else{
        UI.moreWrap.style.display='none';
      }
    }

    function renderRestAuto(list){
      UI.btnMore.disabled=true; UI.btnMore.textContent='ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦';
      let idx = RENDERED_COUNT;
      const step = ()=>{
        if(idx >= list.length){
          UI.moreWrap.style.display='none';
          return;
        }
        const end = Math.min(idx + NEXT_CHUNK, list.length);
        const frag=document.createDocumentFragment();
        for(let i=idx;i<end;i++) frag.appendChild(makeTile(list[i]));
        UI.grid.appendChild(frag);
        idx = end; RENDERED_COUNT = idx;
        if(idx < list.length) setTimeout(step, 0);
        else UI.moreWrap.style.display='none';
      };
      step();
    }

    /* =========================
       3) ì¹´í…Œê³ ë¦¬/ê²€ìƒ‰
    ==========================*/
    function setActiveCategory(cat){
      ACTIVE_CAT = cat;
      document.querySelectorAll('.cat-btn').forEach(b=> b.classList.toggle('active', b.dataset.cat===cat));
      BASE_LIST = CAT_MAP.get(cat) || [];
      applySearch();  // ì´ˆê¸° 36ê°œ + ë”ë³´ê¸°
    }

    function applySearch(){
      const q = UI.search.value.trim().toLowerCase();
      VIEW_LIST = !q ? BASE_LIST : BASE_LIST.filter(it => (it.nameText || it.name || '').includes(q));
      renderInitial(VIEW_LIST);
      showStatus(`ì¹´í…Œê³ ë¦¬: <b>${label(ACTIVE_CAT)}</b> Â· í•­ëª©: <b>${VIEW_LIST.length.toLocaleString()}</b> (ì²« í™”ë©´ ${INITIAL_COUNT}ê°œ)`);
    }

    /* =========================
       4) ë°ì´í„°(ì¸ë¼ì¸ â†’ ì™¸ë¶€ ì„ ë¡œë”©/ë³‘í•©)
    ==========================*/
    async function hydrateExternalData(){
      // ë°±ê·¸ë¼ìš´ë“œ ì„ ë¡œë”©(ìºì‹œ ì›Œë°)
      fetch(DATA_BASE + 'build.json').catch(()=>{});
      fetch(SPRITES_BASE + 'SPRITE_MAP.json').catch(()=>{});
      fetch(SPRITES_BASE + 'SUPPORT_HINTS.json').catch(()=>{});
    }

    async function loadExternalIfNeeded(){
      if(BUILD && SPRITE_MAP!==null) return true; // ì´ë¯¸ ë³‘í•©ë¨
      BUILD = await fetchJSON(DATA_BASE + 'build.json');
      SPRITE_MAP = await fetchJSON(SPRITES_BASE + 'SPRITE_MAP.json') || SPRITE_MAP;
      SUPPORT_HINTS = await fetchJSON(SPRITES_BASE + 'SUPPORT_HINTS.json') || SUPPORT_HINTS;
      if(!BUILD) return false;

      const root = BUILD.items || BUILD.emojis || BUILD.data || BUILD.rows || BUILD;
      const ext  = Array.isArray(root) ? normalizeItems(root) : normalizeItems([root]);

      const seen = new Set(ALL_ITEMS.map(x=>x.code||x.emoji));
      const merged = ALL_ITEMS.slice();
      for(const it of ext){
        const key=it.code||it.emoji;
        if(!seen.has(key)){ seen.add(key); merged.push(it); }
      }
      ALL_ITEMS = merged;
      CAT_MAP   = rebuildCatMap(ALL_ITEMS);
      buildCategoryTable(CAT_MAP);
      return true;
    }

    /* =========================
       5) ë³µì‚¬/ì´ë²¤íŠ¸
    ==========================*/
    async function copyToClipboard(text){
      try{ await navigator.clipboard.writeText(text); toast(); }
      catch(_){ UI.copyOut.value=text; UI.copyOut.select(); document.execCommand('copy'); toast(); }
    }
    UI.btnCopy.addEventListener('click', ()=>{ const v=UI.copyOut.value||''; if(v) copyToClipboard(v); });
    UI.grid.addEventListener('click', (e)=>{
      const t=e.target.closest('.tile'); if(!t) return;
      const emoji=t.dataset.emoji||''; if(!emoji) return;
      UI.copyOut.value = emoji; copyToClipboard(emoji);
    });
    UI.search.addEventListener('input', ()=>applySearch());
    UI.btnMore.addEventListener('click', ()=> renderRestAuto(VIEW_LIST));

    window.addEventListener('resize', ()=>{
      if(!CAT_MAP.size) return;
      buildCategoryTable(CAT_MAP);
      setActiveCategory(ACTIVE_CAT);
    });

    /* =========================
       6) ë¶€íŠ¸ìŠ¤íŠ¸ë©
    ==========================*/
    (async function boot(){
      showStatus("ì´ˆê¸° ë°ì´í„° ì¤€ë¹„ ì¤‘â€¦");

      // (A) ì¸ë¼ì¸ People & Body ì¦‰ì‹œ í‘œì‹œ
      const inlinePeople = JSON.parse(document.getElementById('INLINE_PEOPLE').textContent || "[]");
      const normPeople = normalizeItems(inlinePeople);
      ALL_ITEMS = normPeople;
      CAT_MAP   = rebuildCatMap(ALL_ITEMS);
      buildCategoryTable(CAT_MAP);

      // ê¸°ë³¸ ì¹´í…Œê³ ë¦¬: People & Body (ì—†ìœ¼ë©´ ì²« ì¹´í…Œê³ ë¦¬)
      const first = [...CAT_MAP.keys()].find(k=>PREF.includes(k)) || [...CAT_MAP.keys()][0];
      setActiveCategory(first);
      hideStatus();

      // (B) ì™¸ë¶€ ë°ì´í„° ì„ ë¡œë”©
      hydrateExternalData();

      // (C) ì‚¬ìš©ìê°€ ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ë¡œ ì´ë™í•˜ë©´, ê·¸ ì‹œì ì— ë³‘í•©(ì´ë¯¸ ì„ ë¡œë”©ëœ ìƒíƒœë¼ ì¦‰ì‹œ ë°˜ì‘)
      // â†’ ìœ„ ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ì—ì„œ ì²˜ë¦¬
    })();
  </script>
</body>
</html>
