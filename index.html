<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>í”„ë¡œ ì´ëª¨ì§€ ê²€ìƒ‰ â€” í•˜ì´ë¸Œë¦¬ë“œ ì¸ë¼ì¸ PRO</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <style>
    :root{
      --grid-width:520px;     /* ì´ˆê¸° LCP ìµœì†Œí™”(ì›í•˜ë©´ 560px) */
      --tile:72px;            /* íƒ€ì¼ í¬ê¸° */
      --gap:8px;              /* íƒ€ì¼ ê°„ê²© */
      --maxw:1100px;          /* ë ˆì´ì•„ì›ƒ í­ */
      --cat-h:48px;           /* ì¹´í…Œê³ ë¦¬ ì…€ ë†’ì´ */
      --cat-f:15px;           /* ì¹´í…Œê³ ë¦¬ ê¸€ì í¬ê¸° */
    }
    *{ box-sizing:border-box }
    html,body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Apple Color Emoji,Noto Color Emoji,sans-serif }

    /* ìƒë‹¨ ë°” */
    #toolbar{ position:sticky; top:0; z-index:9; background:#fff; border-bottom:1px solid #eee; }
    #toolbar .in{ max-width:var(--maxw); margin:0 auto; padding:10px 12px; display:grid; gap:8px; grid-template-columns:1fr auto; align-items:center; }
    #search{ height:40px; border:1px solid #ddd; border-radius:8px; padding:0 12px; font-size:15px; }
    #copyBox{ display:flex; gap:8px; align-items:center; }
    #copyOut{ width:160px; height:40px; border:1px solid #ddd; border-radius:8px; padding:0 12px; font-size:16px; }
    #btnCopy{ height:40px; padding:0 14px; border:1px solid #333; background:#111; color:#fff; border-radius:8px; cursor:pointer; }

    /* ì¹´í…Œê³ ë¦¬ í‘œ */
    #catWrap{ position:sticky; top:60px; z-index:8; background:#fff; border-bottom:1px solid #eee; }
    #catWrap .in{ max-width:var(--maxw); margin:0 auto; padding:8px 12px; }
    table.cat{ width:100%; table-layout:fixed; border-collapse:collapse; font-size:var(--cat-f); }
    table.cat td{ padding:0; border:1px solid #f1f1f1; }
    .cat-btn{ width:100%; height:var(--cat-h); display:grid; grid-template-columns:28px 1fr; gap:8px; align-items:center; padding:8px 10px; border:0; background:#fff; cursor:pointer; }
    .cat-btn:hover{ background:#fafafa; }
    .cat-btn.active{ outline:2px solid rgba(0,0,0,.08); background:#f9f9ff; }
    .cat-emo{ width:24px; height:24px; display:inline-flex; align-items:center; justify-content:center; font-size:20px; }
    .cat-lab{ overflow:hidden; white-space:nowrap; text-overflow:ellipsis; text-align:left; }

    /* ê·¸ë¦¬ë“œ */
    #gridWrap{ max-width:var(--grid-width); margin:12px auto 60px; padding:0 8px; }
    #grid{ display:grid; grid-template-columns:repeat(auto-fill, minmax(var(--tile), 1fr)); gap:var(--gap); align-items:start; }
    .tile{ width:var(--tile); height:var(--tile); display:inline-flex; align-items:center; justify-content:center; border:1px solid #eee; border-radius:10px; background:#fff; cursor:pointer; user-select:none; transition:transform .04s; }
    .tile:hover{ transform:translateY(-1px); background:#fafafa; }
    .tile img{ width:var(--tile); height:var(--tile); image-rendering:-webkit-optimize-contrast; }

    /* ìƒíƒœ/í† ìŠ¤íŠ¸/ë²•ì  í‘œê¸° */
    #status{ max-width:960px; margin:16px auto 0; padding:8px 12px; color:#444; text-align:center; display:none; font-size:14px; }
    #toast{ position:fixed; left:50%; bottom:24px; transform:translateX(-50%); z-index:20; background:rgba(0,0,0,.8); color:#fff; padding:8px 12px; border-radius:20px; font-size:14px; opacity:0; pointer-events:none; transition:opacity .2s; }
    #toast.show{ opacity:1; }
    #legal{ max-width:var(--maxw); margin:24px auto 40px; padding:0 12px; font-size:12px; color:#777; }
    #legal a{ color:inherit; text-decoration:underline; }

    @media (max-width:720px){
      :root{ --cat-f:14px }
      #toolbar .in{ grid-template-columns:1fr }
      #catWrap{ top:112px }
    }
  </style>

  <!-- Twemoji: PNG ê°•ì œ(SVG OFF) -->
  <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <!-- ìƒë‹¨ -->
  <header id="toolbar">
    <div class="in">
      <input id="search" type="search" placeholder="ì´ëª¨ì§€ ì´ë¦„(name_*)ìœ¼ë¡œ ê²€ìƒ‰ (í˜„ì¬ ì¹´í…Œê³ ë¦¬ ë‚´)" />
      <div id="copyBox">
        <input id="copyOut" type="text" readonly placeholder="ë³µì‚¬í•  ì´ëª¨ì§€" />
        <button id="btnCopy" type="button">ë³µì‚¬</button>
      </div>
    </div>
  </header>

  <!-- ì¹´í…Œê³ ë¦¬ -->
  <section id="catWrap">
    <div class="in">
      <table class="cat"><tbody id="catBody"></tbody></table>
    </div>
  </section>

  <!-- ìƒíƒœ/ê·¸ë¦¬ë“œ/í† ìŠ¤íŠ¸ -->
  <div id="status"></div>
  <main id="gridWrap"><section id="grid"></section></main>
  <div id="toast">ë³µì‚¬ ì™„ë£Œ!</div>

  <!-- ë²•ì  í‘œê¸° -->
  <footer id="legal">
    Emoji graphics by <a href="https://twemoji.twitter.com/" target="_blank" rel="noopener">Twemoji</a> Â© Twitter,
    licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">CC BY 4.0</a>.
    Unicode data Â© The Unicode Consortium.
  </footer>

  <!-- ğŸ”¹ ì¸ë¼ì¸ ë°ì´í„°: ìŠ¤ë§ˆì¼/ê°ì • ì „ëŸ‰ì„ ë„£ëŠ” ìŠ¬ë¡¯(ë¹Œë“œì‹œ ì£¼ì…) -->
  <!--  ì‹¤ì œ ìš´ì˜ ì‹œ, ì´ ë°°ì—´ì„ "ìŠ¤ë§ˆì¼/ê°ì • ì¹´í…Œê³ ë¦¬ ì „ë¶€"ë¡œ ë¹Œë“œ ë‹¨ê³„ì—ì„œ ì±„ì›Œ ë„£ì–´ì£¼ì„¸ìš”.
        í•„ë“œ: group, name/name_ko/name_en(ì•„ë¬´ê±°ë‚˜), code(ì˜ˆ: "1F600"), emoji(ê°€ëŠ¥í•˜ë©´) -->
  <script type="application/json" id="INLINE_SMILE">
  [
    { "group":"Smileys & Emotion", "name":"grinning face", "code":"1F600", "emoji":"ğŸ˜€" },
    { "group":"Smileys & Emotion", "name":"smiling face",  "code":"263A",  "emoji":"â˜ºï¸" },
    { "group":"Smileys & Emotion", "name":"face with tears of joy", "code":"1F602", "emoji":"ğŸ˜‚" }
    /* â‡§â‡§â‡§ ë¹Œë“œ ì‹œ ì—¬ê¸°ì— 'ìŠ¤ë§ˆì¼/ê°ì •' ì¹´í…Œê³ ë¦¬ ì „ì²´ë¥¼ ì£¼ì…(ìˆ˜ë°±ê°œ) */
  ]
  </script>

  <script type="module">
    /* =========================
       0) ìƒìˆ˜/ìœ í‹¸
    ==========================*/
    const BASE = (()=>{ const p=location.pathname.split('/').filter(Boolean); return p.length?`/${p[0]}/`:'/' })();
    const DATA_BASE    = BASE + 'data/';
    const SPRITES_BASE = BASE + 'sprites/';

    // ë Œë”: ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ ì „ëŸ‰ì„ "ì²­í¬"ë¡œ ëê¹Œì§€ ë¡œë“œ
    const FIRST_CHUNK = 240;
    const NEXT_CHUNK  = 240;

    // ê¸°ë³¸ ì§„ì… ì¹´í…Œê³ ë¦¬
    const PREF = ["Smileys & Emotion","ìŠ¤ë§ˆì¼/ê°ì •"];

    const UI = {
      search:   document.getElementById('search'),
      copyOut:  document.getElementById('copyOut'),
      btnCopy:  document.getElementById('btnCopy'),
      status:   document.getElementById('status'),
      grid:     document.getElementById('grid'),
      catBody:  document.getElementById('catBody'),
      toast:    document.getElementById('toast'),
    };

    const showStatus = (m)=>{ UI.status.style.display='block'; UI.status.innerHTML = m; };
    const hideStatus = ()=>{ UI.status.style.display='none'; UI.status.textContent = ''; };
    const toast = (t="ë³µì‚¬ ì™„ë£Œ!")=>{ UI.toast.textContent=t; UI.toast.classList.add('show'); setTimeout(()=>UI.toast.classList.remove('show'), 900); };

    const twemojiParse = (el)=> window.twemoji?.parse(el, {
      base:"https://cdn.jsdelivr.net/npm/twemoji@14.0.2/assets/", folder:"72x72", ext:".png"
    });

    const codeToEmoji = (code)=>{ try{ return String.fromCodePoint(...String(code).split('-').map(h=>parseInt(h,16))); }catch(_){ return "â“"; } };
    const pick = (obj, keys)=>{ for(const k of keys){ if(obj[k]!=null && obj[k]!=="") return obj[k];
      const k2 = Object.keys(obj).find(x=>x.toLowerCase()===k.toLowerCase()); if(k2 && obj[k2]!=null && obj[k2]!=="") return obj[k2]; } return ''; };

    const CAT_ORDER = ["Smileys & Emotion","People & Body","Animals & Nature","Food & Drink","Travel & Places","Activities","Objects","Symbols","Flags"];
    const KO = {"Smileys & Emotion":"ìŠ¤ë§ˆì¼/ê°ì •","People & Body":"í”¼í”Œ/ë°”ë””","Animals & Nature":"ë™ë¬¼/ìì—°","Food & Drink":"ìŒì‹/ìŒë£Œ","Travel & Places":"ì—¬í–‰/ì¥ì†Œ","Activities":"í™œë™","Objects":"ì‚¬ë¬¼","Symbols":"ê¸°í˜¸","Flags":"êµ­ê¸°"};
    const label = (raw)=> KO[raw] || raw || "ê¸°íƒ€";

    // ìƒíƒœ
    let BUILD = null, SPRITE_MAP = null, SUPPORT_HINTS = null;
    let ALL_ITEMS = [];      // ëª¨ë“  ì•„ì´í…œ(ì¸ë¼ì¸ + ì™¸ë¶€ ë¡œë“œ ë³‘í•©)
    let CAT_MAP   = new Map();
    let ACTIVE_CAT = null;
    let BASE_LIST = [], VIEW_LIST = [];

    // ê°„ë‹¨ fetch
    async function fetchJSON(url){
      try{ const r = await fetch(url, { cache:"no-cache" }); if(r.ok) return await r.json(); } catch(_){}
      return null;
    }

    /* =========================
       1) ì •ê·œí™” & ì¹´í…Œê³ ë¦¬ êµ¬ì„±
    ==========================*/
    function normalizeItems(root){
      const out=[]; const seen=new Set();
      (function walk(node, inherited=''){
        if(!node) return;
        if(Array.isArray(node)){ for(const v of node) walk(v, inherited); return; }
        if(typeof node!=='object') return;

        const group = pick(node, ['group','category','major','cat','section','type']) || inherited;
        if (Array.isArray(node.items)) { for(const v of node.items) walk(v, group); }

        const code = pick(node, ['code','hex','u','unified','unicode','codepoint','cp']);
        const emojiChar = node.emoji || (code ? codeToEmoji(code) : '');

        if (emojiChar || code){
          const key = (code || emojiChar);
          if(seen.has(key)) return; seen.add(key);

          // name_* í•©ì¹˜ê¸°
          const nameFields = Object.keys(node).filter(k=> /^name[_-]/i.test(k) || k==='name' );
          const names = nameFields.map(k=> String(node[k]) ).filter(Boolean);
          const primary =
            pick(node, ['name_ko','name_kr','name_korean','name']) ||
            pick(node, ['name_en','label','cldr','short_name','id']) || '';

          out.push({
            group: group || pick(node, ['group','category','major','cat']) || 'ê¸°íƒ€',
            name: primary,
            nameText: [primary, ...names].join(' ').trim().toLowerCase(), // ê²€ìƒ‰ ëŒ€ìƒ
            code: (code||'').toUpperCase(),
            emoji: emojiChar,
            png: pick(node, ['png','pngUrl','url','image','img']),
          });
        }else{
          for(const v of Object.values(node)) if(v && typeof v==='object') walk(v, group);
        }
      })(root, '');
      return out;
    }

    function rebuildCatMap(items){
      const m=new Map();
      for(const it of items){
        const c = it.group || 'ê¸°íƒ€';
        if(!m.has(c)) m.set(c, []);
        m.get(c).push(it);
      }
      // ì¹´í…Œê³ ë¦¬ë³„ ì •ë ¬(ì„ íƒ): ì½”ë“œ/ì´ë¦„ ê¸°ì¤€
      for(const [k,arr] of m.entries()){
        arr.sort((a,b)=> (a.name||'').localeCompare(b.name||'', 'ko'));
      }
      return m;
    }

    function buildCategoryTable(map){
      const tbody = UI.catBody; tbody.innerHTML = "";
      const cats = Array.from(map.keys())
        .sort((a,b)=>(CAT_ORDER.indexOf(a)===-1?999:CAT_ORDER.indexOf(a))-(CAT_ORDER.indexOf(b)===-1?999:CAT_ORDER.indexOf(b)));
      const cols = (innerWidth<=720) ? 3 : 5;

      for(let i=0;i<cats.length;i+=cols){
        const tr=document.createElement('tr');
        for(const cat of cats.slice(i,i+cols)){
          const td=document.createElement('td');
          const btn=document.createElement('button');
          btn.className="cat-btn"; btn.dataset.cat = cat;

          const em=document.createElement('span'); em.className="cat-emo";
          const sample = (map.get(cat)||[])[0]; em.textContent = sample?.emoji || "ğŸ˜€";

          const la=document.createElement('span'); la.className="cat-lab"; la.textContent = label(cat);

          btn.append(em, la); td.appendChild(btn); tr.appendChild(td);
        }
        while(tr.children.length<cols) tr.appendChild(document.createElement('td'));
        tbody.appendChild(tr);
      }
      twemojiParse(tbody);
      tbody.onclick = (e)=>{
        const b = e.target.closest('.cat-btn'); if(!b) return;
        setActiveCategory(b.dataset.cat);
      };
    }

    /* =========================
       2) ë Œë”ëŸ¬(ìŠ¤í”„ë¼ì´íŠ¸ > PNG > Twemoji)
    ==========================*/
    function hasSprite(it){
      return SPRITE_MAP && (SPRITE_MAP[it.code] || (SPRITE_MAP.sprites && SPRITE_MAP.sprites[it.code]));
    }
    function getSpriteRec(it){
      return (SPRITE_MAP && (SPRITE_MAP[it.code] || (SPRITE_MAP.sprites && SPRITE_MAP.sprites[it.code]))) || null;
    }

    function makeTile(it){
      const t=document.createElement('div'); t.className='tile'; t.title=it.name || it.code || '';

      // 1) ìŠ¤í”„ë¼ì´íŠ¸
      if(hasSprite(it)){
        const rec=getSpriteRec(it);
        const sheet=(rec.sheet||rec.s||rec.sprite||'emoji-top500-1.webp');
        const bx=-(rec.x||rec.left||0), by=-(rec.y||rec.top||0);
        const bw= rec.w||rec.width || 72, bh = rec.h||rec.height || 72;
        t.style.backgroundImage = `url(${SPRITES_BASE}${sheet})`;
        t.style.backgroundPosition = `${bx}px ${by}px`;
        t.style.backgroundRepeat = "no-repeat";
        t.style.width = bw+"px"; t.style.height = bh+"px";
        t.dataset.emoji = it.emoji;
        return t;
      }

      // 2) PNG(ê°œë³„ íŒŒì¼)
      if(it.png && !(SUPPORT_HINTS?.block?.includes(it.code))){
        const img=document.createElement('img'); img.loading='lazy'; img.decoding='async';
        img.src = it.png; img.alt = it.name || it.code || '';
        t.appendChild(img); t.dataset.emoji = it.emoji; return t;
      }

      // 3) Twemoji PNG(ìµœí›„): íƒ€ì¼ ë‹¨ìœ„ íŒŒì‹±
      const s=document.createElement('span'); s.textContent = it.emoji || codeToEmoji(it.code); s.style.fontSize="40px";
      t.appendChild(s); twemojiParse(t);
      t.dataset.emoji = it.emoji || '';
      return t;
    }

    function renderChunked(list){
      UI.grid.innerHTML = "";
      let idx = 0;

      // ì²« í™”ë©´ í˜ì¸íŠ¸
      const first = list.slice(0, FIRST_CHUNK);
      const f1 = document.createDocumentFragment();
      for(const it of first) f1.appendChild(makeTile(it));
      UI.grid.appendChild(f1);
      idx = FIRST_CHUNK;

      // ì´í›„ ìŠ¤í¬ë¡¤ì— ë”°ë¼ ëê¹Œì§€ ë¡œë“œ
      const sentinel = document.createElement('div');
      UI.grid.appendChild(sentinel);
      const io = new IntersectionObserver((entries)=>{
        if(!entries.some(e=>e.isIntersecting)) return;
        if(idx >= list.length){ io.disconnect(); return; }
        const part = list.slice(idx, idx + NEXT_CHUNK);
        const frag = document.createDocumentFragment();
        for(const it of part) frag.appendChild(makeTile(it));
        UI.grid.insertBefore(frag, sentinel);
        idx += NEXT_CHUNK;
      }, { rootMargin:"900px" });
      io.observe(sentinel);
    }

    /* =========================
       3) ì¹´í…Œê³ ë¦¬/ê²€ìƒ‰
    ==========================*/
    function setActiveCategory(cat){
      ACTIVE_CAT = cat;
      document.querySelectorAll('.cat-btn').forEach(b=> b.classList.toggle('active', b.dataset.cat===cat));
      BASE_LIST = CAT_MAP.get(cat) || [];
      applySearch();
    }

    function applySearch(){
      const q = UI.search.value.trim().toLowerCase();
      VIEW_LIST = !q ? BASE_LIST : BASE_LIST.filter(it => (it.nameText || it.name || '').includes(q));
      renderChunked(VIEW_LIST);
      showStatus(`ì¹´í…Œê³ ë¦¬: <b>${label(ACTIVE_CAT)}</b> Â· í•­ëª©: <b>${VIEW_LIST.length.toLocaleString()}</b>`);
    }

    /* =========================
       4) ë°ì´í„° ë¡œë“œ(ì¸ë¼ì¸ â†’ ì™¸ë¶€)
    ==========================*/
    async function hydrateExternalData(){
      // ì™¸ë¶€ íŒŒì¼ ì„ ë¡œë”©(ë‹¤ìŒ í´ë¦­ì— ì¦‰ì‹œ ë°˜ì‘í•˜ë„ë¡ ìºì‹œ)
      fetch(DATA_BASE + 'build.json').catch(()=>{});
      fetch(SPRITES_BASE + 'SPRITE_MAP.json').catch(()=>{});
      fetch(SPRITES_BASE + 'SUPPORT_HINTS.json').catch(()=>{});
    }

    async function loadExternalIfNeeded(){
      if(BUILD && CAT_MAP.size>1) return true;   // ì´ë¯¸ ì™¸ë¶€ ë³‘í•© ë
      // ì™¸ë¶€ ìŠ¤ëƒ…ìƒ· ë¡œë“œ
      BUILD = await fetchJSON(DATA_BASE + 'build.json');
      SPRITE_MAP = await fetchJSON(SPRITES_BASE + 'SPRITE_MAP.json') || SPRITE_MAP;
      SUPPORT_HINTS = await fetchJSON(SPRITES_BASE + 'SUPPORT_HINTS.json') || SUPPORT_HINTS;

      if(!BUILD) return false;

      const root = BUILD.items || BUILD.emojis || BUILD.data || BUILD.rows || BUILD;
      const ext  = Array.isArray(root) ? normalizeItems(root) : normalizeItems([root]);
      // ì¸ë¼ì¸(ìŠ¤ë§ˆì¼/ê°ì •) ì¤‘ë³µ ì œê±° í›„ ë³‘í•©
      const seen = new Set(ALL_ITEMS.map(x=>x.code||x.emoji));
      const merged = ALL_ITEMS.slice();
      for(const it of ext){
        const key = it.code || it.emoji;
        if(!seen.has(key)){ seen.add(key); merged.push(it); }
      }
      ALL_ITEMS = merged;
      CAT_MAP   = rebuildCatMap(ALL_ITEMS);
      buildCategoryTable(CAT_MAP);
      return true;
    }

    /* =========================
       5) ë³µì‚¬/ì´ë²¤íŠ¸
    ==========================*/
    async function copyToClipboard(text){
      try{ await navigator.clipboard.writeText(text); toast(); }
      catch(_){ UI.copyOut.value=text; UI.copyOut.select(); document.execCommand('copy'); toast(); }
    }
    UI.search.addEventListener('input', applySearch);
    UI.grid.addEventListener('click', (e)=>{
      const t=e.target.closest('.tile'); if(!t) return;
      const emoji=t.dataset.emoji||''; if(!emoji) return;
      UI.copyOut.value = emoji; copyToClipboard(emoji);
    });
    UI.btnCopy.addEventListener('click', ()=>{ const v=UI.copyOut.value||''; if(v) copyToClipboard(v); });
    window.addEventListener('resize', ()=>{
      if(!CAT_MAP.size) return;
      buildCategoryTable(CAT_MAP);
      setActiveCategory(ACTIVE_CAT);
    });

    /* =========================
       6) ë¶€íŠ¸ìŠ¤íŠ¸ë©
    ==========================*/
    (async function boot(){
      showStatus("ì´ˆê¸° ë°ì´í„° ì¤€ë¹„ ì¤‘â€¦");

      // (A) ì¸ë¼ì¸ ìŠ¤ë§ˆì¼/ê°ì • â†’ ì¦‰ì‹œ í‘œì‹œ
      const inlineSmile = JSON.parse(document.getElementById('INLINE_SMILE').textContent || "[]");
      // ì •ê·œí™”(ì´ë¦„/ì½”ë“œ ë³´ì •)
      const normalizedSmile = normalizeItems(inlineSmile);
      ALL_ITEMS = normalizedSmile;
      CAT_MAP   = rebuildCatMap(ALL_ITEMS);
      buildCategoryTable(CAT_MAP);

      // ê¸°ë³¸ ì§„ì…: ìŠ¤ë§ˆì¼/ê°ì •(ì—†ìœ¼ë©´ ì²« ì¹´í…Œê³ ë¦¬)
      const firstCat = [...CAT_MAP.keys()].find(k=>PREF.includes(k)) || [...CAT_MAP.keys()][0];
      setActiveCategory(firstCat);
      hideStatus();

      // (B) ì™¸ë¶€ ë°ì´í„°/ìŠ¤í”„ë¼ì´íŠ¸ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì„ ë¡œë”©
      hydrateExternalData();

      // (C) ìµœì´ˆ í´ë¦­ ì‹œ ì™¸ë¶€ ë°ì´í„° ë³‘í•© (ìŠ¤ë§ˆì¼/ê°ì • ì™¸ í´ë¦­ì´ë©´ ì¦‰ì‹œ ë¡œë“œ)
      document.getElementById('catBody').addEventListener('click', async (e)=>{
        const btn = e.target.closest('.cat-btn'); if(!btn) return;
        const cat = btn.dataset.cat;
        if(!CAT_MAP.has(cat) || CAT_MAP.get(cat).length === 0 || (CAT_MAP.size === 1 && !PREF.includes(cat))){
          showStatus("ë°ì´í„° í™•ì¥ ë¡œë“œ ì¤‘â€¦");
          const ok = await loadExternalIfNeeded();
          hideStatus();
          if(ok) setActiveCategory(cat);
        }
      }, { capture:true });
    })();
  </script>
</body>
</html>
