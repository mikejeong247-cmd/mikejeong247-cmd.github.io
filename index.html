<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ÌîÑÎ°ú Ïù¥Î™®ÏßÄ Í≤ÄÏÉâ ‚Äî Ïπ¥ÌÖåÍ≥†Î¶¨(Ìè¥Î∞± Ìè¨Ìï®)</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<style>
/* = CSS ÎèôÏùº (1ÏïàÍ≥º ÏôÑÏ†Ñ ÎèôÏùº) = */
:root{--grid-width:520px;--tile:72px;--gap:8px;--maxw:1100px;--cat-h:48px;--cat-f:15px}
*{box-sizing:border-box}html,body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Apple Color Emoji,Noto Color Emoji,sans-serif}
#toolbar{position:sticky;top:0;z-index:9;background:#fff;border-bottom:1px solid #eee}
#toolbar .in{max-width:var(--maxw);margin:0 auto;padding:10px 12px;display:grid;gap:8px;grid-template-columns:1fr auto;align-items:center}
#search{height:40px;border:1px solid #ddd;border-radius:8px;padding:0 12px;font-size:15px}
#copyBox{display:flex;gap:8px;align-items:center}
#copyOut{width:160px;height:40px;border:1px solid #ddd;border-radius:8px;padding:0 12px;font-size:16px}
#btnCopy{height:40px;padding:0 14px;border:1px solid #333;background:#111;color:#fff;border-radius:8px;cursor:pointer}
#catWrap{position:sticky;top:60px;z-index:8;background:#fff;border-bottom:1px solid #eee}
#catWrap .in{max-width:var(--maxw);margin:0 auto;padding:8px 12px}
table.cat{width:100%;table-layout:fixed;border-collapse:collapse;font-size:var(--cat-f)}
table.cat td{padding:0;border:1px solid #f1f1f1}
.cat-btn{width:100%;height:var(--cat-h);display:grid;grid-template-columns:28px 1fr;gap:8px;align-items:center;padding:8px 10px;border:0;background:#fff;cursor:pointer}
.cat-btn:hover{background:#fafafa}.cat-btn.active{outline:2px solid rgba(0,0,0,.08);background:#f9f9ff}
.cat-emo{width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;font-size:20px}
.cat-lab{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left}
#gridWrap{max-width:var(--grid-width);margin:12px auto 60px;padding:0 8px}
#grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--tile),1fr));gap:var(--gap)}
.tile{width:var(--tile);height:var(--tile);display:inline-flex;align-items:center;justify-content:center;border-radius:10px;border:1px solid #eee;background:#fff;cursor:pointer;user-select:none;transition:transform .04s}
.tile:hover{transform:translateY(-1px);background:#fafafa}.tile img{width:var(--tile);height:var(--tile);image-rendering:-webkit-optimize-contrast}
#status{max-width:960px;margin:16px auto 0;padding:8px 12px;color:#444;text-align:center;display:none}
#toast{position:fixed;left:50%;bottom:24px;transform:translateX(-50%);z-index:20;background:rgba(0,0,0,.8);color:#fff;padding:8px 12px;border-radius:20px;font-size:14px;opacity:0;pointer-events:none;transition:opacity .2s}
#toast.show{opacity:1}
#legal{max-width:var(--maxw);margin:24px auto 40px;padding:0 12px;font-size:12px;color:#777}
#legal a{color:inherit;text-decoration:underline}
@media(max-width:720px){:root{--cat-f:14px}#toolbar .in{grid-template-columns:1fr}#catWrap{top:112px}}
</style>
<script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js" crossorigin="anonymous"></script>
</head>
<body>
<header id="toolbar"><div class="in">
  <input id="search" type="search" placeholder="Ïù¥Î™®ÏßÄ Ïù¥Î¶Ñ(name_*)ÏúºÎ°ú Í≤ÄÏÉâ (ÌòÑÏû¨ Ïπ¥ÌÖåÍ≥†Î¶¨ ÎÇ¥)"/>
  <div id="copyBox"><input id="copyOut" type="text" readonly placeholder="Î≥µÏÇ¨Ìï† Ïù¥Î™®ÏßÄ"/><button id="btnCopy">Î≥µÏÇ¨</button></div>
</div></header>
<section id="catWrap"><div class="in"><table class="cat"><tbody id="catBody"></tbody></table></div></section>
<div id="status"></div>
<main id="gridWrap"><section id="grid"></section></main>
<div id="toast">Î≥µÏÇ¨ ÏôÑÎ£å!</div>
<footer id="legal">Emoji graphics by <a href="https://twemoji.twitter.com/" target="_blank" rel="noopener">Twemoji</a> ¬© Twitter, licensed under
<a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">CC BY 4.0</a>. Unicode data ¬© The Unicode Consortium.</footer>

<script type="module">
const BASE=(()=>{const p=location.pathname.split('/').filter(Boolean);return p.length?`/${p[0]}/`:'/';})();
const DATA_BASE=BASE+'data/', SPRITES_BASE=BASE+'sprites/', FIRST_CHUNK=240, NEXT_CHUNK=240, PREF=["Smileys & Emotion","Ïä§ÎßàÏùº/Í∞êÏ†ï"];
const UI={search:document.getElementById('search'),copyOut:document.getElementById('copyOut'),btnCopy:document.getElementById('btnCopy'),status:document.getElementById('status'),grid:document.getElementById('grid'),catBody:document.getElementById('catBody'),toast:document.getElementById('toast')};
const showStatus=m=>{UI.status.style.display='block';UI.status.innerHTML=m}; const hideStatus=()=>{UI.status.style.display='none';UI.status.textContent=''};
const tw=(el)=>window.twemoji?.parse(el,{base:"https://cdn.jsdelivr.net/npm/twemoji@14.0.2/assets/",folder:"72x72",ext:".png"});
const codeToEmoji=c=>{try{return String.fromCodePoint(...String(c).split('-').map(h=>parseInt(h,16)))}catch(_){return"‚ùì"}};
const pick=(o,ks)=>{for(const k of ks){if(o[k]!=null&&o[k]!=='')return o[k];const k2=Object.keys(o).find(x=>x.toLowerCase()===k.toLowerCase());if(k2&&o[k2]!=null&&o[k2]!=='')return o[k2]}return''};
async function get(u){try{const r=await fetch(u,{cache:"no-cache"});if(r.ok)return await r.json()}catch(_){ }return null}
function repo(){const user=location.hostname.replace('.github.io','');const parts=location.pathname.split('/').filter(Boolean);const repo=parts.length?parts[0]:`${user}.github.io`;return {user,repo}}
async function pickJSON(cands){for(const u of cands){try{const r=await fetch(u,{cache:"no-cache"});if(r.ok){const j=await r.json();j.__src=u;return j}}catch(_){}}return null}

let BUILD=null,MAP=null,HINTS=null,ALL=[],CAT=null,ACTIVE=null,BASEL=[],VIEW=[], SRC='';

function norm(root){const out=[],seen=new Set();(function w(n,cat=''){if(!n)return;if(Array.isArray(n)){for(const v of n)w(v,cat);return}if(typeof n!=='object')return;
 const g=pick(n,['group','category','major','cat','section','type'])||cat; if(Array.isArray(n.items))for(const v of n.items)w(v,g);
 const code=pick(n,['code','hex','u','unified','unicode','codepoint','cp']); const emo=n.emoji||(code?codeToEmoji(code):'');
 if(emo||code){const key=(code||emo); if(seen.has(key))return; seen.add(key);
  const names=Object.keys(n).filter(k=>/^name[_-]/i.test(k)||k==='name').map(k=>String(n[k])).filter(Boolean);
  const pri=pick(n,['name_ko','name_kr','name_korean','name'])||pick(n,['name_en','label','cldr','short_name','id'])||'';
  out.push({group:g||pick(n,['group','category','major','cat']),name:pri,nameText:[pri,...names].join(' ').toLowerCase(),code:(code||'').toUpperCase(),emoji:emo,png:pick(n,['png','pngUrl','url','image','img'])});
 } else { for(const v of Object.values(n)) if(v&&typeof v==='object') w(v,g); }})(root,''); return out;}
function catMap(items){const m=new Map();for(const it of items){const c=it.group||'Í∏∞ÌÉÄ';if(!m.has(c))m.set(c,[]);m.get(c).push(it)}return m}
function catTable(m){const tb=UI.catBody;tb.innerHTML="";const ord=["Smileys & Emotion","People & Body","Animals & Nature","Food & Drink","Travel & Places","Activities","Objects","Symbols","Flags"];const cats=[...m.keys()].sort((a,b)=>(ord.indexOf(a)===-1?999:ord.indexOf(a))-(ord.indexOf(b)===-1?999:ord.indexOf(b)));const cols=(innerWidth<=720)?3:5;
 for(let i=0;i<cats.length;i+=cols){const tr=document.createElement('tr');for(const c of cats.slice(i,i+cols)){const td=document.createElement('td'),btn=document.createElement('button');btn.className='cat-btn';btn.dataset.cat=c;const em=document.createElement('span');em.className='cat-emo';em.textContent=(m.get(c)||[])[0]?.emoji||"üòÄ";const la=document.createElement('span');la.className='cat-lab';la.textContent=( {"Smileys & Emotion":"Ïä§ÎßàÏùº/Í∞êÏ†ï","People & Body":"ÌîºÌîå/Î∞îÎîî","Animals & Nature":"ÎèôÎ¨º/ÏûêÏó∞","Food & Drink":"ÏùåÏãù/ÏùåÎ£å","Travel & Places":"Ïó¨Ìñâ/Ïû•ÏÜå","Activities":"ÌôúÎèô","Objects":"ÏÇ¨Î¨º","Symbols":"Í∏∞Ìò∏","Flags":"Íµ≠Í∏∞"}[c]||c );btn.append(em,la);td.appendChild(btn);tr.appendChild(td)}while(tr.children.length<cols)tr.appendChild(document.createElement('td'));tb.appendChild(tr)}tw(tb);tb.onclick=e=>{const b=e.target.closest('.cat-btn');if(b)setCat(b.dataset.cat)}}
const hasSpr=it=> MAP && (MAP[it.code] || (MAP.sprites && MAP.sprites[it.code])); const rec=it=>(MAP && (MAP[it.code] || (MAP.sprites && MAP.sprites[it.code])))||null;
function tile(it){const t=document.createElement('div');t.className='tile';t.title=it.name||it.code||""; if(hasSpr(it)){const r=rec(it),sheet=(r.sheet||r.s||r.sprite||"emoji-top500-1.webp");const bx=-(r.x||r.left||0),by=-(r.y||r.top||0),bw=r.w||r.width||72,bh=r.h||r.height||72;
t.style.backgroundImage=`url(${SPRITES_BASE}${sheet})`;t.style.backgroundPosition=`${bx}px ${by}px`;t.style.backgroundRepeat="no-repeat";t.style.width=bw+"px";t.style.height=bh+"px";t.dataset.emoji=it.emoji;return t}
if(it.png && !(HINTS?.block?.includes(it.code))){const img=document.createElement('img');img.loading="lazy";img.decoding="async";img.src=it.png;img.alt=it.name||it.code||"";t.appendChild(img);t.dataset.emoji=it.emoji;return t}
const s=document.createElement('span');s.textContent=it.emoji||"‚ùì";s.style.fontSize="40px";t.appendChild(s);tw(t);t.dataset.emoji=it.emoji||"";return t}
function renderChunk(list){UI.grid.innerHTML=""; let idx=0; const first=list.slice(0,FIRST_CHUNK); const f=document.createDocumentFragment(); for(const it of first) f.appendChild(tile(it)); UI.grid.appendChild(f); idx=FIRST_CHUNK;
const sentinel=document.createElement('div'); UI.grid.appendChild(sentinel); const io=new IntersectionObserver(es=>{if(!es.some(e=>e.isIntersecting))return; if(idx>=list.length){io.disconnect();return;}
const part=list.slice(idx,idx+NEXT_CHUNK); const fr=document.createDocumentFragment(); for(const it of part) fr.appendChild(tile(it)); UI.grid.insertBefore(fr,sentinel); idx+=NEXT_CHUNK;},{rootMargin:"900px"}); io.observe(sentinel);}
function setCat(c){ACTIVE=c; document.querySelectorAll('.cat-btn').forEach(b=>b.classList.toggle('active', b.dataset.cat===c)); BASEL=CAT.get(c)||[]; applySearch()}
function applySearch(){const q=document.getElementById('search').value.trim().toLowerCase(); VIEW=!q?BASEL:BASEL.filter(it=>(it.nameText||it.name||'').includes(q)); renderChunk(VIEW); showStatus(`${SRC} ¬∑ Ïπ¥ÌÖåÍ≥†Î¶¨: <b>${ACTIVE}</b> ¬∑ Ìï≠Î™©: <b>${VIEW.length.toLocaleString()}</b>`)}
async function copyTxt(t){try{await navigator.clipboard.writeText(t); document.getElementById('toast').classList.add('show'); setTimeout(()=>document.getElementById('toast').classList.remove('show'),900)}catch(_){document.getElementById('copyOut').value=t; document.getElementById('copyOut').select(); document.execCommand('copy')}}
document.getElementById('search').oninput=applySearch; document.getElementById('grid').onclick=e=>{const t=e.target.closest('.tile'); if(!t)return; const emo=t.dataset.emoji||''; if(emo){document.getElementById('copyOut').value=emo; copyTxt(emo)}}; document.getElementById('btnCopy').onclick=()=>{const v=document.getElementById('copyOut').value||''; if(v) copyTxt(v)};

function emergency(){const s=(g,n,c)=>({group:g,name:n,nameText:n.toLowerCase(),code:c,emoji:codeToEmoji(c)}); const A=[s("Smileys & Emotion","grinning face","1F600"),s("Smileys & Emotion","smiling face","263A"),s("Smileys & Emotion","tears of joy","1F602"),s("Smileys & Emotion","heart eyes","1F60D"),s("People & Body","person","1F9D1"),s("Animals & Nature","cat","1F431"),s("Food & Drink","hamburger","1F354"),s("Activities","soccer","26BD"),s("Objects","mobile phone","1F4F1"),s("Symbols","heart","2764"),s("Travel & Places","airplane","2708"),s("Flags","Korea","1F1F0-1F1F7")]; while(A.length<60)A.push({...A[A.length%12]}); return A;}

(async function boot(){
  showStatus("Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ï§ë‚Ä¶");
  const {user,repo}=repo();
  const branches=["main","gh-pages","master"];

  const localB=[DATA_BASE+"build.json","/data/build.json","data/build.json"];
  const cdnB=branches.map(b=>`https://cdn.jsdelivr.net/gh/${user}/${repo}@${b}/data/build.json`);
  const rawB=branches.map(b=>`https://raw.githubusercontent.com/${user}/${repo}/${b}/data/build.json`);
  const localS=[SPRITES_BASE+"SPRITE_MAP.json","/sprites/SPRITE_MAP.json","sprites/SPRITE_MAP.json"];
  const cdnS=branches.map(b=>`https://cdn.jsdelivr.net/gh/${user}/${repo}@${b}/sprites/SPRITE_MAP.json`);
  const rawS=branches.map(b=>`https://raw.githubusercontent.com/${user}/${repo}/${b}/sprites/SPRITE_MAP.json`);
  const localH=[SPRITES_BASE+"SUPPORT_HINTS.json","/sprites/SUPPORT_HINTS.json","sprites/SUPPORT_HINTS.json"];
  const cdnH=branches.map(b=>`https://cdn.jsdelivr.net/gh/${user}/${repo}@${b}/sprites/SUPPORT_HINTS.json`);
  const rawH=branches.map(b=>`https://raw.githubusercontent.com/${user}/${repo}/${b}/sprites/SUPPORT_HINTS.json`);

  // build Ïö∞ÏÑ†
  const tryBuild = await pickJSON([...localB, ...cdnB, ...rawB]);
  if(tryBuild){ BUILD=tryBuild; SRC=`ÏÜåÏä§: <b>build.json</b> <small>${BUILD.__src||'local'}</small>`; }
  MAP   = await pickJSON([...localS, ...cdnS, ...rawS]) || null;
  HINTS = await pickJSON([...localH, ...cdnH, ...rawH]) || null;

  if(BUILD){ const root=BUILD.items||BUILD.emojis||BUILD.data||BUILD.rows||BUILD; ALL=norm(root); CAT=catMap(ALL); catTable(CAT);
    const first=[...CAT.keys()].find(k=>PREF.includes(k))||[...CAT.keys()][0]; setCat(first); hideStatus(); return; }

  // build Ïã§Ìå® ‚Üí ÏÉòÌîå
  SRC="ÏÜåÏä§: <b>ÎÇ¥Ïû• ÏÉòÌîå</b>"; ALL=emergency(); CAT=catMap(ALL); catTable(CAT); const first=[...CAT.keys()][0]; setCat(first);
})();
</script>
</body></html>
